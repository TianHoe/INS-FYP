"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6603],{6603:(E,m,a)=>{a.r(m),a.d(m,{LoginPagePageModule:()=>j});var u=a(6895),o=a(433),r=a(2078),d=a(9171),p=a(655),f=a(5226),h=a.n(f),v=a(4004),e=a(8256),P=a(1802),Z=a(2468);function x(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div"),e._UZ(2,"ion-icon",16),e.qZA(),e.TgZ(3,"div",17),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.message)}}function y(i,s){if(1&i&&(e.ynx(0),e.YNc(1,x,5,1,"div",12),e.BQk()),2&i){const t=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.loginForm.get("judgeEmail").hasError(t.type)&&(n.loginForm.get("judgeEmail").dirty||n.loginForm.get("judgeEmail").touched))}}function w(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div"),e._UZ(2,"ion-icon",16),e.qZA(),e.TgZ(3,"div",17),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Oqu(t.message)}}function F(i,s){if(1&i&&(e.ynx(0),e.YNc(1,w,5,1,"div",12),e.BQk()),2&i){const t=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.loginForm.get("judgePassword").hasError(t.type)&&(n.loginForm.get("judgePassword").dirty||n.loginForm.get("judgePassword").touched))}}function L(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"div"),e._UZ(2,"ion-icon",16),e.qZA(),e.TgZ(3,"div",17),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.errorMessage)}}const U=[{path:"",component:(()=>{class i{constructor(t,n,g,l){this.formBuilder=t,this.router=n,this.authservice=g,this.dataservice=l,this.validationUserMessage={judgeEmail:[{type:"required",message:"Please enter your mail"},{type:"pattern",message:"Email entered is incorrect"}],judgePassword:[{type:"required",message:"Please enter your password"},{type:"minlength",message:"Password must be at least 5 characters or more"}]}}ngOnInit(){this.loginForm=this.formBuilder.group({judgeEmail:new o.NI("",o.kI.compose([o.kI.required,o.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])),judgePassword:new o.NI("",o.kI.compose([o.kI.required,o.kI.minLength(5)]))}),this.loginForm.valueChanges.subscribe(()=>{this.errorMessage=""})}checkUserExist(t){return this.dataservice.getJudge().pipe((0,v.U)(n=>{for(let g of n)if(g.auth_id==t.user.uid)return!0;return!1}))}LoginUser(t){return(0,p.mG)(this,void 0,void 0,function*(){this.authservice.loginFireauth(t).then(n=>{this.checkUserExist(n).subscribe(g=>{g||n.user.emailVerified?g&&!n.user.emailVerified?(this.authservice.sendVerificationEmail(n.user),this.loginForm.reset(),this.router.navigate(["homepage"])):(this.loginForm.reset(),this.router.navigate(["homepage"])):h().fire({title:"Welcome to OnRouteX!",html:'<p>Please provide us your name and phone number so that we know you better.</p><div class="d-flex flex-column judtify-content-center align-items-center"><div class="mb-3"><ion-icon name="person-sharp" class="mr-3"></ion-icon><input id="swal-input-name" class="swal2-input m-0" placeholder="Username"></div><div><ion-icon name="call-sharp" class="mr-3"></ion-icon><input id="swal-input-hpnum" class="swal2-input m-0" placeholder="Phone Number"></div></div>',focusConfirm:!1,heightAuto:!1,allowOutsideClick:!1,preConfirm:()=>{const c=document.getElementById("swal-input-name").value,A=document.getElementById("swal-input-hpnum").value;this.authservice.updateUserProfile({uid:n.user.uid,name:c}),this.dataservice.addJudge({auth_id:n.user.uid,name:c,contactnum:A,email:n.user.email})}}).then(()=>{n.user.emailVerified||(this.authservice.sendVerificationEmail(n.user),this.router.navigate(["homepage"])),this.loginForm.reset()})})}).catch(n=>{this.errorMessage=n})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(o.qu),e.Y36(d.F0),e.Y36(P.e),e.Y36(Z.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login-page"]],decls:24,vars:6,consts:[["color","toolbar",1,"ion-padding",3,"fullscreen"],[1,"d-flex","flex-column","h-100","justify-content-center","align-items-center"],[1,"d-flex","flex-column","align-items-center","w-100"],[1,"app-logo-container"],["src","../../assets/icon/logo.png"],[1,"fw-bold"],[1,"px-3","py-4","mx-4","rounded"],[3,"formGroup","ngSubmit"],["formControlName","judgeEmail","placeholder","Email address","type","email"],[1,"mt-2"],[4,"ngFor","ngForOf"],["formControlName","judgePassword","type","password","placeholder","Password"],["class","text-danger d-flex",4,"ngIf"],[1,"mt-4","login-button","text-center"],["type","submit","fill","outline",3,"disabled"],[1,"text-danger","d-flex"],["name","information-circle-sharp"],[1,"align-self-start"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"ion-img",4),e.qZA(),e.TgZ(5,"div")(6,"h4",5),e._uU(7,"OnRouteX"),e.qZA()()(),e.TgZ(8,"div")(9,"ion-card",6)(10,"ion-card-content")(11,"form",7),e.NdJ("ngSubmit",function(){return n.LoginUser(n.loginForm.value)}),e.TgZ(12,"ion-item"),e._UZ(13,"ion-input",8),e.qZA(),e.TgZ(14,"div",9),e.YNc(15,y,2,1,"ng-container",10),e.qZA(),e.TgZ(16,"ion-item",9),e._UZ(17,"ion-input",11),e.qZA(),e.TgZ(18,"div",9),e.YNc(19,F,2,1,"ng-container",10),e.qZA(),e.YNc(20,L,5,1,"div",12),e.TgZ(21,"div",13)(22,"ion-button",14),e._uU(23,"Login"),e.qZA()()()()()()()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(11),e.Q6J("formGroup",n.loginForm),e.xp6(4),e.Q6J("ngForOf",n.validationUserMessage.judgeEmail),e.xp6(4),e.Q6J("ngForOf",n.validationUserMessage.judgePassword),e.xp6(1),e.Q6J("ngIf",n.errorMessage),e.xp6(2),e.Q6J("disabled",!n.loginForm.valid))},dependencies:[u.sg,u.O5,o._Y,o.JJ,o.JL,o.sg,o.u,r.YG,r.PM,r.FN,r.W2,r.gu,r.Xz,r.pK,r.Ie,r.j9],styles:["ion-item[_ngcontent-%COMP%]::part(native){padding-left:0}.swal2-input[_ngcontent-%COMP%]{margin:0}"]}),i})()}];let T=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(U),d.Bz]}),i})(),j=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,o.u5,o.UX,r.Pc,T]}),i})()}}]);